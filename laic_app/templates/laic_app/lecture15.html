{% extends 'laic_app/lecturebase.html' %}

{% block video %}
    <iframe width="560" height="315"
        src="https://www.youtube.com/embed/Y_Ac6KiQ1t0"
        frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
    </iframe>
{% endblock video %}

{% block keyIdeas %}
    <li>Take a vector b projected onto a vector a. Point p is the point on a closest to b, which forms a perpendicular with b.
        That perpendicular = e = b - p. Since p is some portion of a, p = xa. Since e is perpendicular to a, we have that a<sup>T</sup>
        e = 0 which implies a<sup>T</sup>(b - p) = 0 which implies a<sup>T</sup>(b - xa) = 0 which implies x = a<sup>T</sup>b / a<sup>T</sup>a
        which implies p = a(a<sup>T</sup>b / a<sup>T</sup>a). Now we can let p = Pb where P is the projection matrix aa<sup>T</sup> / a<sup>T</sup>a
    </li>
    <li>Column space of P = line through a, rank of P = 1, P is symmetric (P<sup>T</sup> = P), and P<sup>2</sup> = P</li>
    <li>When Ax = b can't be solved, solve Ax&#770 = P instead, as P is the projection of b onto the column space of A</li>
    <li>In 3D: same process generates A<sup>T</sup>(b - Ax&#770) = 0 which implies A<sup>T</sup>Ax&#770 = A<sup>T</sup>b
    which implies x&#770 = (A<sup>T</sup>A)<sup>-1</sup>A<sup>T</sup>b and p = Ax&#770 = A(A<sup>T</sup>A)<sup>-1</sup>A<sup>T</sup>b which implies
the projection matrix P = A(A<sup>T</sup>A)<sup>-1</sup>A<sup>T</sup>. Note that P = I only if A is a square, invertible matrix</li>
    <li>In 3D: P<sup>T</sup> = P and P<sup>2</sup> = P as well</li>
{% endblock keyIdeas %}

{% block inCode %}
    <li>Trying to solve Ax = b for 3 equations with 2 unknowns</li>
{% endblock inCode %}

{% block code %}
    <div id="highlighterMainDiv_727607" class="syntaxhighlighter nogutter python"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td>&nbsp;</td></tr><tr><td id="codeContainer_727607" class="code"><div id="container_727607" class="container"><div id="codeline" class="line number1 index0 alt2"><code class="python comments"># LECTURE 15 - Projections onto Subspaces</code></div><div id="codeline" class="line number2 index1 alt1">&nbsp;</div><div id="codeline" class="line number3 index2 alt2"><code class="python keyword">import</code> <code class="python plain">numpy as np</code></div><div id="codeline" class="line number4 index3 alt1">&nbsp;</div><div id="codeline" class="line number5 index4 alt2"><code class="python comments"># Trying to solve Ax = b for 3 equations with 2 unknowns</code></div><div id="codeline" class="line number6 index5 alt1">&nbsp;</div><div id="codeline" class="line number7 index6 alt2"><code class="python plain">A </code><code class="python keyword">=</code> <code class="python plain">np.array([[</code><code class="python value">1</code><code class="python plain">, </code><code class="python value">1</code><code class="python plain">], [</code><code class="python value">1</code><code class="python plain">, </code><code class="python value">2</code><code class="python plain">], [</code><code class="python value">1</code><code class="python plain">, </code><code class="python value">3</code><code class="python plain">]])</code></div><div id="codeline" class="line number8 index7 alt1"><code class="python plain">b </code><code class="python keyword">=</code> <code class="python plain">np.array([[</code><code class="python value">1</code><code class="python plain">], [</code><code class="python value">2</code><code class="python plain">], [</code><code class="python value">2</code><code class="python plain">]])</code></div><div id="codeline" class="line number9 index8 alt2">&nbsp;</div><div id="codeline" class="line number10 index9 alt1"><code class="python comments">#print(f'A = \n{A}\nb = \n{b}\nSolving for x in Ax = b gives \n{np.linalg.solve(A, b)}')</code></div><div id="codeline" class="line number11 index10 alt2">&nbsp;</div><div id="codeline" class="line number12 index11 alt1"><code class="python comments">#OUTPUT:</code></div><div id="codeline" class="line number13 index12 alt2"><code class="python comments">'''</code></div><div id="codeline" class="line number14 index13 alt1"><code class="python comments">numpy.linalg.LinAlgError: Last 2 dimensions of the array must be square</code></div><div id="codeline" class="line number15 index14 alt2"><code class="python comments">'''</code></div><div id="codeline" class="line number16 index15 alt1">&nbsp;</div><div id="codeline" class="line number17 index16 alt2"><code class="python functions">print</code><code class="python plain">(</code><code class="python string">'Now applying the ideas from the lecture:'</code><code class="python plain">)</code></div><div id="codeline" class="line number18 index17 alt1">&nbsp;</div><div id="codeline" class="line number19 index18 alt2"><code class="python plain">newA </code><code class="python keyword">=</code> <code class="python plain">np.dot(A.transpose(), A)</code></div><div id="codeline" class="line number20 index19 alt1"><code class="python plain">newB </code><code class="python keyword">=</code> <code class="python plain">np.dot(A.transpose(), b)</code></div><div id="codeline" class="line number21 index20 alt2">&nbsp;</div><div id="codeline" class="line number22 index21 alt1"><code class="python functions">print</code><code class="python plain">(f</code><code class="python string">'Multiplying both sides of Ax = b by A transpose gives: \n{np.linalg.solve(newA, newB)}'</code><code class="python plain">)</code></div><div id="codeline" class="line number23 index22 alt2"><code class="python comments">#OUTPUT:</code></div><div id="codeline" class="line number24 index23 alt1"><code class="python comments">'''</code></div><div id="codeline" class="line number25 index24 alt2"><code class="python comments">Now applying the ideas from the lecture:</code></div><div id="codeline" class="line number26 index25 alt1"><code class="python comments">Multiplying both sides of Ax = b by A transpose gives:</code></div><div id="codeline" class="line number27 index26 alt2"><code class="python comments">[[0.66666667]</code></div><div id="codeline" class="line number28 index27 alt1"><code class="python spaces">&nbsp;</code><code class="python comments">[0.5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ]]</code></div><div id="codeline" class="line number29 index28 alt2"><code class="python comments">'''</code></div></div></td></tr><tr><td>&nbsp;</td></tr><tr><td>&nbsp;</td></tr></tbody></table></div>
{% endblock code %}